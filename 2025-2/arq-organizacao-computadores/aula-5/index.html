<!doctype html><html lang="en"><head><meta charset="utf-8"><meta content="width=device-width,initial-scale=1" name="viewport"><title>Aula 5 - Entrada e saída</title><style>a,abbr,acronym,address,applet,article,aside,audio,b,big,blockquote,body,canvas,caption,center,cite,code,dd,del,details,dfn,div,dl,dt,em,embed,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,header,hgroup,html,i,iframe,img,ins,kbd,label,legend,li,mark,menu,nav,object,ol,output,p,pre,q,ruby,s,samp,section,small,span,strike,strong,sub,summary,sup,table,tbody,td,tfoot,th,thead,time,tr,tt,u,ul,var,video{margin:0;padding:0;border:0;font-size:100%;font:inherit;vertical-align:baseline}article,aside,details,figcaption,figure,footer,header,hgroup,menu,nav,section{display:block}body{line-height:1}blockquote,q{quotes:none}blockquote:after,blockquote:before,q:after,q:before{content:'';content:none}table{border-collapse:collapse;border-spacing:0}</style><style>:root{--main-bg:#282828;--main-fg:#ebdbb2;--main-fg-20:#ebdbb266;--main-fg-40:#ebdbb2dd;--main-primary:#fe8019;--main-primary-20:#fe801966}body{font-family:-apple-system,BlinkMacSystemFont,avenir next,avenir,segoe ui,helvetica neue,Adwaita Sans,Cantarell,Ubuntu,roboto,noto,helvetica,arial,sans-serif;min-height:100vh;display:flex;justify-content:center;background-color:var(--main-bg);color:var(--main-fg);line-height:1.35;padding:2rem 1rem}.content{width:100%;max-width:960px}.title{font-size:2.986rem;color:var(--main-primary);font-weight:700}.subtitle{font-size:1.2rem;margin-bottom:.5rem;opacity:.5}.subtitle-2{font-size:1.44rem;margin-top:2rem;margin-bottom:.5rem;font-weight:700}.class-date{opacity:.35}a,a:visited{color:var(--main-fg);text-decoration:none}a:hover{text-decoration:underline}ol,ul{margin-left:1rem}ol+p,ul+p{margin-top:1rem}li{margin-bottom:.5rem}li::marker{opacity:.6}</style><style>.md h1{font-size:2.986rem;color:var(--main-primary);font-weight:700}.md h2{font-size:2.074rem;margin:.8em 0 .4em 0;border-bottom:2px solid var(--main-primary-20)}.md h3{display:inline-block;font-size:1.44rem;margin-bottom:.2em;border-bottom:2px solid var(--main-fg-20)}.md .subtitle{margin-bottom:2rem}.md a,.md a:visited{text-decoration:underline;text-decoration-color:var(--main-fg-20)}.md .mermaid{display:flex;justify-content:center;margin-bottom:1rem;border:none}.md .mermaid svg{background-color:var(--main-fg-40)}.md table,.md td,.md th{border:1px solid var(--main-fg-20)}.md td,.md th{padding:.1rem .2rem}.md th{font-weight:700}.md p{margin-bottom:1rem}.md table{margin:0 auto 1rem auto}.md em{font-style:italic}.md strong{font-weight:700}.md pre{padding:.1rem .2rem;border:1px solid var(--main-fg-20);font-family:Consolas,Monaco,"Andale Mono","Ubuntu Mono",monospace}.md img{max-width:100%;margin:1rem auto;display:block;padding:1rem;background-color:var(--main-fg-20)}.md .mono{font-family:Consolas,Monaco,"Andale Mono","Ubuntu Mono",monospace}</style><style>code[class*=language-],pre[class*=language-]{color:#ebdbb2;font-family:Consolas,Monaco,"Andale Mono",monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-] ::-moz-selection,code[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection,pre[class*=language-]::-moz-selection{color:#fbf1c7;background:#7c6f64}code[class*=language-] ::selection,code[class*=language-]::selection,pre[class*=language-] ::selection,pre[class*=language-]::selection{color:#fbf1c7;background:#7c6f64}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#1d2021}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em}.token.cdata,.token.comment,.token.prolog{color:#a89984}.token.atrule,.token.boolean,.token.delimiter,.token.important,.token.keyword,.token.selector{color:#fb4934}.token.attr-name,.token.operator,.token.punctuation{color:#a89984}.token.builtin,.token.doctype,.token.tag,.token.tag .punctuation{color:#fabd2f}.token.entity,.token.number,.token.symbol{color:#d3869b}.token.constant,.token.property,.token.variable{color:#fb4934}.token.char,.token.string{color:#b8bb26}.token.attr-value,.token.attr-value .punctuation{color:#a89984}.token.url{color:#b8bb26;text-decoration:underline}.token.function{color:#fabd2f}.token.regex{background:#b8bb26}.token.bold{font-weight:700}.token.italic{font-style:italic}.token.inserted{background:#a89984}.token.deleted{background:#fb4934}</style></head><body><div class="content md"><h1>Aula 5 - Entrada e saída</h1><p class="subtitle">15/09/2025</p><p>A arquitetura de E/S do sistema de computação é a sua interface com o mundo exterior. Essa arquitetura oferece uma maneira sistemática de controlar a interação com o mundo externo, e são o terceiro elemento chave de um sistema computacional (os outros dois são processador e módulos de memória). Cada módulo de E/S se conecta ao barramento do sistema e controla um ou mais dispositivos periféricos. Estes módulos são o conjunto de conectores mecânicos que realizam a ligação física do periférico, além de conter a lógica para realizar a comunicação entre o periférico e o barramento.</p><p>É possível classificar os dispositivos periféricos em três tipos:</p><ul><li>legíveis ao ser humano: monitores, impressoras, teclados, etc</li><li>legíveis à máquina: sistemas de disco, sensores, atuadores, etc</li><li>comunicação: placas de bluetooth, wi-fi, etc</li></ul><p>A interface entre o barramento e o módulo de E/S ocorre na forma de sinais de controle, dados e estado. Os sinais de controle determinam a função que o dispositivo realizará, como enviar dados ao módulo de E/S (entrada, <em>input</em> ou <em>read</em>), aceitar dados do módulo de E/S (saída, <em>output</em> ou <em>write</em>), informar o estado ou realizar alguma função de controle particular do dispositivo. Os sinais de dados são o conjunto de <em>bits</em> a serem enviados ou recebidos do módulo de E/S. Por último, os sinais de estado indicam o estado do dispositivo, por exemplo, READY (pronto) ou NOT-READY (ocupado).</p><h2>Requisitos de um módulo de E/S</h2><p>Os principais requisitos que um módulo de E/S deve cumprir são:</p><ul><li>Controle e temporização: o módulo deve coordenar o fluxo de tráfego entre os recursos internos e periféricos externos</li><li>Comunicação com o processador: o módulo deve ser capaz de decodificar o comando recebido do processador, trocar dados, informar o estado do periférico, além de reconhecer o endereço específico daquele periférico</li><li>Comunicação com o dispositivo: o módulo deve ser capaz de se comunicar com o dispositivo conectado a ele</li><li>Armazenar temporariamente dados (<em>buffering</em>): o módulo deve ser capaz de armazenar temporariamente dados para lidar com diferentes taxas de transferência de <em>bits</em></li><li>Detecção de erros: o módulo de E/S normalmente é responsável por relatar erros ao processador, como erros mecânicos, papel emperrado, etc.</li></ul><h2>Técnicas de operações de E/S</h2><p>Existem três técnicas de operações de E/S: programada, controlada por interrupção e acesso direto à memória.</p><h3>E/S programada</h3><p>Quando o processador está executando um programa e encontra uma instrução de E/S, ele executa essa instrução emitindo um comando ao módulo de E/S correspondente. Com a E/S programada, o módulo irá realizar a ação e só depois definirá o sinal de estado indicando a conclusão. O módulo de E/S não toma nenhuma ação para notificar o processador, isto é, ele não interrompe o processador. Nessa técnica, é responsabilidade do processador verificar periodicamente o estado do módulo de E/S até descobrir se a operação terminou.</p><p>Para esta técnica, o processador pode executar os seguintes comandos:</p><ul><li>Controle: ativa um periférico e diz a ele o comando a fazer. Esses comandos são ajustados conforme o tipo de periférico</li><li>Teste: checa o estado atual do dispositivo, por exemplo, se ele está pronto pra uso, se houve algum erro, se o comando foi concluído, etc</li><li>Leitura: faz com que o módulo de E/S obtenha um bloco de dados do periférico e coloque em um <em>buffer</em> interno</li><li>Escrita: faz com que o módulo de E/S pegue um bloco de dados do barramento e transmita ele para o periférico</li></ul><p>A maior limitação da E/S programada é que o processador tem que esperar para que o módulo de E/S de interesse esteja pronto para a transferência de dados. O processador precisa interrogar repetidamente o estado do módulo enquanto espera. Como resultado, há uma perca de desempenho do sistema.</p><h3>E/S controlada por interrupção</h3><p>Uma alternativa para a E/S programada é que o processador emita o comando para o módulo e continue realizando algum outro trabalho útil, sem necessidade de ficar checando o estado do dispositivo. O módulo de E/S então irá interromper o processador para dar o retorno da operação quando estiver pronto. O processador então executa a transferência de dados e retorna para o seu processamento anterior.</p><p>Do ponto de vista do módulo de E/S, ele recebe o comando do processador, prossegue para ler os dados, e quando os dados estão prontos para serem lidos ou escritos, o módulo envia um sinal de interrupção ao processador através do sinal de controle. O módulo espera que os dados sejam transmitidos pelo processador e após isso ele está pronto para outra operação de E/S.</p><p>Do ponto de vista do processador, após a emissão do comando, ele prossegue com outras tarefas, de outros programas abertos. Ao final de cada ciclo, o processador verifica se há interrupções. Quando ocorre alguma interrupção do módulo de E/S, o processador suspende a execução que ele estava fazendo, processa a interrupção, e então restaura o trabalho no programa suspenso.</p><p>Como desvantagem, a E/S controlada por interrupção ainda requer a intervenção ativa do processador para transferir dados entre a memória e um módulo de E/S, e quaisquer transferências de dados ainda precisam passar sempre pelo processador. Assim, tanto a E/S controlada por interrupção quanto a E/S programada possuem taxas de transferência limitadas pela velocidade com a qual o processador pode atender a um dispositivo, além de precisar ocupar o processador para realizar diversas instruções para cada transferência de E/S.</p><h3>Acesso direto à memória (DMA)</h3><p>Quando grandes volumes de dados precisam ser movidos por um módulo de E/S, uma técnica mais eficiente é necessária: acesso direto à memória (DMA).</p><p>A técnica de DMA envolve um módulo adicional no barramento do sistema: o módulo de DMA. Ele é capaz de imitar o processador e assumir o controle do sistema do processador quando necessário. Ele precisa fazer isso para transferir dados da memória para o barramento e vice-versa. Dessa forma, as operações de E/S são delegadas ao módulo de DMA, livrando o processador para continuar com outros trabalhos. Quando a transferência termina, o módulo de DMA envia uma interrupção para o processador, similar à E/S controlada por interrupção, e dessa forma o processador é envolvido apenas no início e no final de uma transferência de dados de E/S.</p><p>Para realizar essa transferência de dados pelo barramento, o módulo de DMA precisa utilizá-lo apenas quando o processador não precisar dele, ou então o módulo de DMA precisa forçar o processador a suspender as comunicações com o barramento temporariamente. Essa última técnica é a mais comum, e é conhecida como roubo de ciclo (<em>cycle stealing</em>).</p><script async type="module">import mermaid from"https://unpkg.com/mermaid@10/dist/mermaid.esm.min.mjs";document.addEventListener("DOMContentLoaded",mermaid.initialize({loadOnSave:!0}))</script></div></body></html>